{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "autosize": {"resize": true},
  "vconcat":[
    {
      "title": "Injury-Death Rate of Gun Violence per State in USA 2017",
      "width": 1000,
  "height": 400,
  "projection": {"type": "albersUsa"},
  "data": {
    "url": "https://raw.githubusercontent.com/Chokss54/Week-10-HW/main/US_map1.json",
    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
  },
  "transform": [
    {
      "lookup": "properties.name",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/Chokss54/Week-10-HW/main/US_gun_tragedy_per_state.vg.json",
          "format": {"type": "csv"}
        },
        "key": "state",
        "fields": ["KDI state"]
      }
    }
  ],
  "mark": {"type": "geoshape",
    "stroke": "#757575",
    "strokeWidth": 0.5},
    "params": [{"name": "countrySelection", "select": {"type": "point"}}],
  "encoding": {
    "color": {
      "field": "KDI state",
      "type": "quantitative",
      "title": "Injury-Death rate",
      "scale": {"type": "linear"
      }
      
    }
    ,
    "tooltip": [
      {"field": "properties.name", "type": "nominal", "title": "state"},
      {"field": "KDI state", "type": "quantitative", "title": "Injury-Death rate"}
    ]
  }
    },
    {
      "title":"Total Gun Violence Count by State in USA 2017",
      "width": 1000,
      "data":{
    "url": "https://raw.githubusercontent.com/Chokss54/Week-10-HW/main/US_map1.json",
    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
  },
      "transform": [{
        "lookup":"properties.name",
        "from":{
          "data": {"url": "https://raw.githubusercontent.com/Chokss54/Week-10-HW/main/US_gun_tragedy_per_state.vg.json"},
          "key": "state",
          "fields": ["total incident", "total injured", "total killed"]
        }
      },
      {"filter": {"param": "countrySelection", "empty": false}}],
"repeat": {"layer": ["total incident", "total injured", "total killed"]},
"spec": {
  "mark": "bar",
  "encoding": {
    "y": {"field": "properties.name", "type": "nominal", "title":"State"},
    "x": {
      "aggregate": "sum",
      "field": {"repeat": "layer"},
      "type": "quantitative",
      "title": "Total Count"
    },
    "tooltip":[
      {"field": "properties.name", "type": "nominal", "title": "state"},
      {"field": "total incident", "type": "quantitative", "title": "Total Incidents"},
      {"field": "total injured", "type": "quantitative", "title": "Total Injuries"},
      {"field": "total killed", "type": "quantitative", "title": "Total Deaths"}
    ],
    "color": {"datum": {"repeat": "layer"}, "title": "Tragedy Type"},
    "yOffset": {"datum": {"repeat": "layer"}}
  }
}
    }
  ],
  "config": {"concat": {"spacing": 100}}
}